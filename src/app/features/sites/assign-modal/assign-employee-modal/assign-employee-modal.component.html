<div class="modal-backdrop" (click)="closed.emit()"></div>

<div class="modal-card">
  <div class="modal-header">
    <h3 class="m-0">Affecter un employé au site</h3>
    <button class="btn btn-light" (click)="closed.emit()">×</button>
  </div>

  <div class="modal-body">
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <div class="d-flex gap-2 mb-3">
      <input class="form-control" placeholder="Rechercher (nom, email)…"
             [(ngModel)]="q" (ngModelChange)="search()">
    </div>

    <div *ngIf="loading" class="text-center my-4">
      <div class="spinner-border spinner-border-sm"></div>
    </div>

    <div *ngIf="!loading && !list.length" class="text-muted">
      Aucun employé disponible à affecter.
    </div>

    <ul class="list-group" *ngIf="!loading && list.length">
      <li class="list-group-item d-flex justify-content-between align-items-center"
          *ngFor="let e of list">
        <div>
          <strong>{{ e.lastName }} {{ e.firstName }}</strong>
          <small class="text-muted ms-2">{{ e.email || '—' }}</small>
        </div>
        <button class="btn btn-sm btn-primary" (click)="attach(e)">Affecter</button>
      </li>
    </ul>
  </div>

  <div class="modal-footer">
    <button class="btn btn-outline-secondary" (click)="closed.emit()">Fermer</button>
  </div>
</div>

