<!-- reset-password.component.html -->
<div class="container py-4" style="max-width:520px;">
  <h3 class="mb-3">Définir un nouveau mot de passe</h3>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <!-- mot de passe -->
    <div class="mb-3">
      <label class="form-label">Nouveau mot de passe</label>
      <input type="password"
             formControlName="password"
             class="form-control">
    </div>

    <!-- confirmation -->
    <div class="mb-3">
      <label class="form-label">Confirmer</label>
      <input type="password"
             formControlName="confirm"
             class="form-control">
      <!-- message d’erreur si mismatch -->
      <div *ngIf="form.errors?.['mismatch'] && form.touched"
           class="text-danger small">
        Les mots de passe ne correspondent pas
      </div>
    </div>

    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
    <div *ngIf="done"  class="alert alert-success">
      Mot de passe réinitialisé&nbsp;!
    </div>

    <button class="btn btn-primary"
            [disabled]="loading || form.invalid">
      <span *ngIf="loading"
            class="spinner-border spinner-border-sm me-2"></span>
      Valider
    </button>
  </form>
</div>
